files, = glob_wildcards("data/{sample}.fastq.gz")




include: "rules/ncrna_workflow.smk"
include: "rules/statistics.smk"


module=config.get("module","bowtie2")

if module == "bowtie2":
	rule all:
		input:
			expand("results/count_tables/{gene}.tsv",gene=gene),
			expand(["results/count_tables/" + x + ".tsv" for x in ["lncRNA","misc_RNA","protein_coding","snoRNA","snRNA","scaRNA"]]),
			"results/file_statistics.csv",
			expand("analyses/fastqc/{sample}.trimmed.FastQC/{sample}.trimmed_fastqc.zip",sample=files),
			"results/multiqc_report.html",
			"results/mirtrace/mirtrace-report.html"



elif module == "bowtie1":
	print("Bowtie1 module has been selected.")
	rule all_bowtie1:
		input:
			expand("analyses/bowtie1_mappings/{sample}.sorted.bam",sample=files)


elif module == "stats" or module == "statistics":
	print("Statistics module has been selected.")
	rule statistics:
		input:
			expand("results/statistics/{gene}.tsv",gene=["gencode.uniq.exon","piRNA.uniq","tRNA.uniq"])
	

else:
	print("Please select a correct module...")
	print("bowtie1/bowtie2/stats")

